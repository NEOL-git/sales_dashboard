# 🚀 Streamlit 대시보드 사용 가이드

## 📖 소개

이 Streamlit 대시보드는 판매 데이터를 실시간으로 분석하고 시각화하는 인터랙티브 웹 애플리케이션입니다.

---

## 🎯 주요 특징

### ✨ 인터랙티브 기능
- **실시간 필터링**: 날짜, 제품 분류, 거래처별 데이터 필터링
- **동적 차트**: 마우스 호버, 줌, 패닝 등 인터랙션 지원
- **탭 네비게이션**: 5개 섹션을 탭으로 쉽게 전환
- **자동 업데이트**: 데이터 변경 시 실시간 반영

### 📊 대시보드 구성
1. **대시보드 개요**: 8개 핵심 KPI 메트릭
2. **시계열 분석**: 월별/분기별/요일별 추이 분석
3. **제품 분석**: 제품 분류별 매출 및 TOP 제품
4. **거래처 분석**: 주요 거래처 및 거래 패턴
5. **할인 분석**: 할인율 분포 및 제품별 할인 현황

---

## 🚀 실행 방법

### 1. Streamlit 앱 실행

```bash
streamlit run app.py
```

### 2. 브라우저 접속

자동으로 브라우저가 열리며, `http://localhost:8501`에서 대시보드 확인 가능

### 3. 수동 접속 (자동 실행 안 될 경우)

브라우저 주소창에 다음 입력:
```
http://localhost:8501
```

---

## 🎮 사용 방법

### 📁 파일 업로드 (새 기능!)

#### Excel 또는 CSV 파일 업로드하기
1. **사이드바** 상단의 **"📁 데이터 소스"** 섹션으로 이동
2. **"Excel 또는 CSV 파일 업로드 (선택사항)"** 영역에서 **"Browse files"** 클릭
3. 분석하려는 파일 선택
   - **Excel**: `.xlsx` 또는 `.xls`
   - **CSV**: `.csv` (UTF-8, CP949, EUC-KR 등 자동 감지)
4. Excel 파일의 경우 **"시트명"** 입력 (기본값: Sheet1)
5. CSV 파일의 경우 시트명 불필요 (자동 처리)
6. 파일이 자동으로 로드되고 분석 시작

#### 기본 파일 사용하기
- 파일을 업로드하지 않으면 **기본 파일(판매.xlsx)** 자동 사용
- 프로젝트 폴더에 `판매.xlsx` 파일이 있어야 함

#### 업로드 파일 형식 요구사항
Excel 파일은 다음 **필수 컬럼**을 포함해야 합니다:
- ✅ `날짜`: 거래 날짜 (날짜 형식)
- ✅ `거래처명`: 거래처 이름
- ✅ `분류명`: 제품 분류
- ✅ `제품명`: 제품 이름
- ✅ `단가`: 제품 단가
- ✅ `수량`: 판매 수량
- ✅ `금액`: 총 금액

**선택 컬럼**:
- 📋 `Discount`: 할인율 (0~1 사이 소수)
- 📋 `색상`: 제품 색상
- 📋 `제품코드`: 제품 코드

---

### 📌 사이드바 필터 사용하기

#### 1️⃣ 날짜 범위 선택
- **기본값**: 전체 데이터 기간
- **변경 방법**: 
  - 시작일과 종료일을 캘린더에서 선택
  - 날짜를 직접 입력 가능

#### 2️⃣ 제품 분류 필터
- **기본값**: 전체 선택 (비어있음)
- **사용법**: 
  - 드롭다운에서 원하는 제품 분류 선택
  - 여러 개 선택 가능
  - 전체 선택하려면 비워두기

#### 3️⃣ 거래처 필터
- **기본값**: 전체 선택 (비어있음)
- **사용법**:
  - 드롭다운에서 특정 거래처 선택
  - 여러 개 선택 가능
  - 전체 선택하려면 비워두기

#### 4️⃣ 필터 적용/초기화
- **✅ 필터 적용 버튼**: 선택한 필터 조건 적용
- **🔄 필터 초기화 버튼**: 모든 필터 초기 상태로 복원

### 📊 차트 인터랙션

#### 마우스 호버
- 차트 위에 마우스를 올리면 **상세 데이터 툴팁** 표시
- 정확한 수치 확인 가능

#### 줌 (확대/축소)
- **마우스 드래그**: 특정 영역 선택하여 확대
- **더블클릭**: 원래 크기로 복원

#### 패닝 (이동)
- 줌 상태에서 차트를 드래그하여 이동

#### 다운로드
- 차트 우측 상단의 **카메라 아이콘** 클릭
- PNG 이미지로 저장 가능

### 📑 데이터 테이블

#### 정렬
- **컬럼 헤더 클릭**: 해당 컬럼 기준 정렬
- 오름차순 ↔ 내림차순 전환

#### 검색
- 테이블 상단의 **검색창**에서 키워드 입력
- 실시간으로 필터링된 결과 표시

---

## 💡 사용 시나리오

### 시나리오 0: 자신의 데이터 파일 분석
1. 사이드바 상단 **"📁 데이터 소스"** 섹션으로 이동
2. **"Browse files"** 클릭하여 자신의 Excel 파일 업로드
3. 필요시 시트명 입력
4. 업로드 완료 후 자동으로 분석 시작
5. 모든 차트와 KPI가 업로드된 데이터로 업데이트됨

### 시나리오 1: 특정 기간 매출 분석
1. 사이드바에서 **날짜 범위** 선택 (예: 2019-01-01 ~ 2019-03-31)
2. **✅ 필터 적용** 버튼 클릭
3. **📈 시계열 분석** 탭에서 월별 추이 확인

### 시나리오 2: 특정 제품 분류 집중 분석
1. 사이드바 **제품 분류**에서 관심 분류 선택 (예: "컴퓨터")
2. **✅ 필터 적용** 클릭
3. **📦 제품 분석** 탭에서 해당 분류 상세 분석

### 시나리오 3: 주요 거래처 모니터링
1. 사이드바 **거래처**에서 특정 거래처 선택
2. **✅ 필터 적용** 클릭
3. **🏢 거래처 분석** 탭에서 거래 패턴 확인

### 시나리오 4: 할인 정책 효과 분석
1. **💰 할인 분석** 탭 선택
2. 할인 적용 비율 및 제품별 할인율 확인
3. 필요시 제품 분류 필터 적용하여 세부 분석

---

## 🔄 데이터 업데이트

### 자동 새로고침
1. `판매.xlsx` 파일 업데이트
2. 브라우저에서 **"Always rerun"** 선택 또는
3. 키보드 **'R'** 키 눌러 새로고침

### 수동 새로고침
- 브라우저 우측 상단 **"⋮" 메뉴** → **"Rerun"** 클릭
- 또는 키보드 **'R'** 키

---

## 🎨 UI 구성 요소

### 헤더
- **제목**: 판매 데이터 분석 대시보드
- **생성일시**: 현재 날짜 및 시간 표시

### 사이드바
- **필터 옵션**: 날짜, 제품 분류, 거래처
- **데이터 요약**: 필터링된 데이터의 기본 통계

### 메인 영역
- **탭 네비게이션**: 5개 섹션 탭
- **KPI 카드**: 주요 지표 8개
- **차트**: Plotly 인터랙티브 차트
- **데이터 테이블**: 상세 데이터

### 푸터
- 생성 정보 및 문의처

---

## ⚙️ 고급 설정

### 포트 변경
다른 포트로 실행하려면:
```bash
streamlit run app.py --server.port 8502
```

### 브라우저 자동 실행 비활성화
```bash
streamlit run app.py --server.headless true
```

### 테마 변경
`.streamlit/config.toml` 파일 생성 후 설정:
```toml
[theme]
primaryColor="#0A5CA4"
backgroundColor="#FFFFFF"
secondaryBackgroundColor="#F5F5F5"
textColor="#333333"
font="sans serif"
```

---

## 🐛 문제 해결

### 앱이 실행되지 않을 때
```bash
# Streamlit 재설치
py -3 -m pip uninstall streamlit
py -3 -m pip install streamlit

# 캐시 삭제
py -3 -m streamlit cache clear
```

### 포트가 이미 사용 중일 때
```bash
# 다른 포트로 실행
streamlit run app.py --server.port 8502
```

### 차트가 표시되지 않을 때
- 인터넷 연결 확인
- 브라우저 캐시 삭제
- JavaScript 활성화 확인

### 데이터가 업데이트되지 않을 때
- 브라우저에서 **'R'** 키로 새로고침
- 또는 우측 상단 메뉴에서 **"Clear cache"** 선택

### 파일 업로드가 안 될 때
- **지원 형식 확인**: Excel (`.xlsx`, `.xls`) 또는 CSV (`.csv`) 파일만 가능
- **파일 크기 확인**: 200MB 이하 권장
- **필수 컬럼 확인**: 날짜, 거래처명, 분류명, 제품명, 단가, 수량, 금액
- **CSV 인코딩**: UTF-8, CP949, EUC-KR 등 자동 감지 (대부분 정상 작동)

### "필수 컬럼 누락" 오류가 날 때
- Excel 파일의 컬럼명이 정확한지 확인
- 공백이나 특수문자 제거
- 필수 컬럼: `날짜`, `거래처명`, `분류명`, `제품명`, `단가`, `수량`, `금액`

---

## 📱 반응형 디자인

### 데스크톱 (1200px 이상)
- 4열 KPI 카드 레이아웃
- 2열 차트 그리드

### 태블릿 (768px ~ 1199px)
- 2열 KPI 카드 레이아웃
- 1열 차트 레이아웃

### 모바일 (767px 이하)
- 1열 레이아웃
- 스크롤 가능한 차트

---

## 🔐 보안 및 배포

### 로컬 사용
- 기본 설정으로 로컬에서만 접근 가능
- `http://localhost:8501`

### 네트워크 공유
```bash
streamlit run app.py --server.address 0.0.0.0
```
⚠️ **주의**: 방화벽 설정 확인 필요

### Streamlit Cloud 배포
1. GitHub 리포지토리에 코드 업로드
2. [share.streamlit.io](https://share.streamlit.io) 접속
3. 리포지토리 연결 및 배포

---

## 📊 성능 최적화

### 데이터 캐싱
- `@st.cache_data` 데코레이터 사용
- 데이터 로드 시간 단축

### 필터링 전략
- 필요한 필터만 적용
- 대량 데이터는 샘플링 고려

### 차트 최적화
- 필요한 차트만 렌더링
- 데이터 포인트 수 제한 고려

---

## 📚 추가 자료

### 공식 문서
- [Streamlit 공식 문서](https://docs.streamlit.io/)
- [Plotly 공식 문서](https://plotly.com/python/)
- [Pandas 공식 문서](https://pandas.pydata.org/)

### 튜토리얼
- [Streamlit 튜토리얼](https://docs.streamlit.io/get-started/tutorials)
- [Plotly 차트 갤러리](https://plotly.com/python/plotly-express/)

---

## 🆘 지원

### 문의
- **이메일**: [데이터 분석팀]
- **Slack**: #data-analytics
- **이슈 트래커**: GitHub Issues

### FAQ

**Q: 파일을 업로드하면 기존 데이터가 사라지나요?**
A: 아니요, 업로드한 파일을 제거하면 다시 기본 파일(판매.xlsx)로 돌아갑니다.

**Q: 여러 파일을 동시에 분석할 수 있나요?**
A: 현재는 한 번에 하나의 파일만 분석 가능합니다. 파일을 바꾸려면 다른 파일을 업로드하세요.

**Q: 업로드한 파일이 저장되나요?**
A: 업로드된 파일은 메모리에만 임시 저장되며, 브라우저를 닫으면 사라집니다.

**Q: 대시보드가 느려요**
A: 필터를 적용하여 데이터 양을 줄이거나, 캐시를 삭제해보세요.

**Q: 차트를 이미지로 저장하고 싶어요**
A: 차트 우측 상단의 카메라 아이콘을 클릭하세요.

**Q: 새로운 필터를 추가하고 싶어요**
A: `app.py` 파일의 사이드바 섹션을 수정하세요.

**Q: CSV 파일도 업로드할 수 있나요?**
A: 네! CSV 파일(.csv)을 직접 업로드할 수 있습니다. UTF-8, CP949, EUC-KR 등 다양한 인코딩을 자동으로 감지합니다.

**Q: CSV 파일 인코딩이 맞지 않으면 어떻게 하나요?**
A: 시스템이 자동으로 여러 인코딩(UTF-8, CP949, EUC-KR, Latin1)을 시도합니다. 그래도 안 되면 Excel에서 열어서 UTF-8로 저장해보세요.

---

**버전**: v2.2 (CSV 파일 지원 추가)  
**최종 수정일**: 2025년 10월 17일  
**작성자**: 데이터 분석팀

